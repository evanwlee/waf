<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1">
<title>Insert title here</title>
	<script type="text/javascript" language="JavaScript" src="/waf/scripts/ajax.js"></script>
	<script type="text/javascript">
			function subscribe() {

   				var progressDiv = document.getElementById("ProgressHere");
   				progressDiv.innerHTML = "<img  src=\"img/progress.gif\" id=\"progressAjax\"/>";
		     	request = createRequest();
		  		if (request == null) {
		  			alert("Unable to create request to create "+mode+" contianer row!");
		    		return;
		  		}
		  		var url= "newsletter";
				var requestData = "FIRST=EVAN&LAST=LEE&EMAIL=ajaxtest.com.asdf.fsd";

				//alert("Ready");
				request.onreadystatechange = done;
					
		  		request.open("POST", url, true);
		  		request.setRequestHeader("Content-Type", "application/x-www-form-urlencoded");
		  		request.send(requestData);
		  		//alert("Sent");
			}

			function done() {
		   		if (request.readyState == 4) { // onComplete
		   			if (request.status == 200) {  // success
		   				if (request.responseText.indexOf("<!DOCTYPE HTML") != -1) {
		   					alert("Failed to register!");
		   					return;
		   				}

		   				var progressDiv = document.getElementById("ProgressHere");
		   				progressDiv.innerHTML = "";

		     			var detailDiv = document.getElementById("ShowHere");
		     			var repose = request.responseText;
		     			detailDiv.innerHTML = repose;
		     			//alert("gotId");
		    		}
		  		}    	
			}
		</script>
</head>
<body>
<div id="ShowHere"></div>
<div id="ProgressHere"></div>
<button onclick="subscribe()">Sub</button>

</body>
</html>